@use '../abstracts' as *;

@use '../blocks/post/definition-list';
@use '../blocks/post/gray-section';
@use '../blocks/post/members';
@use '../blocks/post/partners';
@use '../components/post-block-related';

.single {
  &__content {
    p:not([class]) {
      margin-bottom: rem(24);
    }

    p:empty {
      display: none;
    }

    /*----------  Headings  ----------*/

    h2,
    h3,
    h4,
    h5,
    h6 {
      margin-top: var(--heading-margin-top, rem(24));
      margin-bottom: rem(8);
    }

    h2 {
      --heading-margin-top: #{rem(56)};
      margin-bottom: rem(16);
      @extend %text-style-heading-x-large;
    }

    h3 {
      --heading-margin-top: #{rem(32)};
      @extend %text-style-heading-large-strong;
    }

    h4 {
      --heading-margin-top: #{rem(32)};
      @extend %text-style-paragraph-x-large-short-sans;
    }

    /*----------  Paragraphs & Lists  ----------*/

    p,
    ul {
      color: $color-black-190;
    }

    p {
      @extend %text-style-paragraph-large-long;
    }

    ul,
    ol {
      margin-top: rem(16);
      padding-left: rem(52);
      @extend %text-style-paragraph-medium-long;
      line-height: 1.4 !important;
    }

    li {
      padding-left: rem(12);
    }

    li + li {
      margin-top: rem(8);
    }

    ol::marker,
    li::marker {
      color: $color-link-primary-200;
      @extend %text-style-label-large;
    }
  }

  /*----------  Links  ----------*/

  a:not([class]) {
    color: $color-link-primary-200;
    @extend %text-style-label-small-strong-caps;
    text-transform: uppercase;
    text-decoration: none;
    transition: all 0.3s ease-in-out;

    &:hover {
      color: $color-bg-dark-100;
    }

    &:focus {
      color: $color-bg-dark-100;
      background: $color-bg-light-300;
    }

    /* stylelint-disable */
    &[href*="//"]:not([class]):not([href*="reconasia.local"]):not([href*="localhost"]):not([href*="reconasia"])
    {
      &::after {
        content: '';
        position: relative;
        top: 1px;
        left: 5px;
        display: inline-block;
        width: 0.8em;
        height: 0.8em;
        background-image: url('/wp-content/themes/reconasia/assets/static/icons/arrow-external.svg');
        background-size: 100% 100%;
        filter: invert(37%) sepia(92%) saturate(344%) hue-rotate(133deg)
          brightness(93%) contrast(101%);
        transition: filter 0.3s ease-in-out;
      }

      &:hover::after {
        filter: invert(4%) sepia(6%) saturate(2132%) hue-rotate(176deg) brightness(90%) contrast(96%);
        opacity: 1 !important;
      }
    }
  }

  .post {
    p > a {
      color:$color-link-primary-200;
      text-decoration: underline;
      text-transform: unset;

      &:hover {
        color: $color-accent-light-primary-100;
        text-decoration: none;
      }

      &:focus {
        color: $color-accent-light-primary-100;
        background: $color-bg-light-400;
        text-decoration: none;
      }

      &:visited {
        color: $color-accent-light-primary-100;
        text-decoration: underline;
      }

      &:after {
        display: none !important;
      }
    }

    .entry__tags {
      margin-top: rem(24);
      margin-bottom: rem(24);
    }
  }

  /*----------  Table  ----------*/

  .wp-block-table {
    color: $color-black-190;
    border: 0 !important;

    &.aligncenter,
    &.alignleft,
    &.alignright {
      width: 100%;
    }

    &.is-style-stripes {
      thead {
        background-color: $color-bg-thead;
      }

      tbody {
        tr:nth-child(even) {
          background-color: $color-bg-tbody;
        }
        tr:nth-child(odd) {
          background-color: $color-white-100;
        }
      }

      th {
        border-top: 1px solid $color-black-115;
      }

      table td + td,
      table th + th {
        border-left: 1px solid $color-black-115;
      }

      td {
        border-bottom: 1px solid $color-black-115;
      }
    }

    table {
      width: 100%;
      margin-top: rem(16px);
      margin-bottom: rem(8px);
      @extend %text-style-paragraph-large-short-sans;
      border-collapse: collapse;
    }

    thead {
      @extend %text-style-label-large-strong;

      th {
        border-bottom: 1px solid $color-black-130 !important;
        text-align: left;
      }
    }

    th,
    td {
      padding: rem(12);
    }

    figcaption {
      color: $color-black-165;
      @extend %text-style-label-medium;
      margin-top: 0.75rem;

      &:after {
        content: '';
        display: block;
        background: $color-black-130;
        height: .0625rem;
        width: 2.5rem; 
        margin-top: 0.75rem;
      }
    }
  }

  &__content,
  &__footer {
    max-width: $size__content-max-width;
    margin-right: auto;
    margin-left: auto;
  }

  &__footer {
    margin-top: rem(80);

    &::before {
      content: '';
      display: block;
      width: rem(120);
      height: 2px;
      margin: 0 auto rem(44);
      background: $color-black-100;
    }

    p + p {
      margin-top: 1rem;
    }

    .heading {
      margin-bottom: rem(8);
      color: $color-black-100;
      text-transform: uppercase;
    }
  }

  &__related-posts {
    margin-bottom: rem(23);
    
    &__container {
      display: grid;
      margin: 0 auto;
      padding: 0 var(--container-padding);
      row-gap: rem(32);
      column-gap: rem(32);

      @include breakpoint('small') {
        // Sets track width, ensures that columns break in groups of 2.
        grid-template-columns: repeat(
          auto-fill,
          minmax(160px, 1fr) minmax(160px, 1fr)
        );
      }

      @include breakpoint('medium') {
        // Sets track width, ensures that columns break in groups of 2.
        grid-template-columns: repeat(
          auto-fill,
          minmax(266px, 1fr) minmax(266px, 1fr)
        );
      }

      @include breakpoint('large') {
        padding: 0;
        grid-template-columns: repeat(4, 1fr);
      }
    }

    &__label {
      grid-area: related;
      color: $color-accent-light-primary-100;
      @extend %text-style-heading-medium;
      font-weight: 700;
      text-transform: uppercase;
    }
  }
}
